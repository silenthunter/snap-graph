<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
 <head>
  <title>
   Autoconf Macro: ax_cflags_warn_all
  </title>
  <link rel="stylesheet" type="text/css" href="autoconf-archive.css">
 </head>
 <body>
  <table summary="web navigation" style="width:100%;">
   <tbody>
    <tr>
     <td style="width:25%;" align="center" valign="top">
      <a href="http://autoconf-archive.cryp.to/ax_cflags_warn_all.m4">Download
      M4 Source</a>
     </td>
     <td style="width:25%;" align="center" valign="top">
      <a href=
      "http://git.cryp.to/?p=autoconf-archive;a=history;f=ax_cflags_warn_all.m4">
      Macro History</a>
     </td>
     <td style="width:25%;" align="center" valign="top">
      <a href="macros-by-category.html">Category Index</a>
     </td>
     <td style="width:25%;" align="center" valign="top">
      <form method="get" action="http://www.google.com/search">
       <div>
        <input name="sitesearch" value="autoconf-archive.cryp.to" type=
        "hidden"><a href="http://www.google.com/">Search</a>: <input name="q"
        size="10" maxlength="255" type="text">
       </div>
      </form>
     </td>
    </tr>
   </tbody>
  </table>
  <hr>
  <h1>
   ax_cflags_warn_all
  </h1>
  <h2>
   Synopsis
  </h2>
  <p class="indent" style="white-space:nowrap;">
   <code>AX_CFLAGS_WARN_ALL [(shellvar [,default, [A/NA]])]</code>
  </p>
  <h2>
   Description
  </h2>
  <div class="indent">
   <p>
    Try to find a compiler option that enables most reasonable warnings. This
    macro is directly derived from <a href=
    "vl_prog_cc_warnings.html">VL_PROG_CC_WARNINGS</a> which is split up into
    two AX_CFLAGS_WARN_ALL and <a href=
    "ax_cflags_warn_all_ansi.html">AX_CFLAGS_WARN_ALL_ANSI</a>
   </p>
   <p>
    For the GNU CC compiler it will be -Wall (and -ansi -pedantic) The result
    is added to the shellvar being CFLAGS by default.
   </p>
   <p>
    Currently this macro knows about GCC, Solaris C compiler, Digital Unix C
    compiler, C for AIX Compiler, HP-UX C compiler, IRIX C compiler, NEC SX-5
    (Super-UX 10) C compiler, and Cray J90 (Unicos 10.0.0.8) C compiler.
   </p>
   <pre>
 - $1 shell-variable-to-add-to : CFLAGS
 - $2 add-value-if-not-found : nothing
 - $3 action-if-found : add value to shellvariable
 - $4 action-if-not-found : nothing
</pre>
  </div>
  <h2>
   Author
  </h2>
  <p class="indent">
   Guido U. Draheim &lt;guidod@gmx.de&gt;
  </p>
  <h2>
   Last Modified
  </h2>
  <p class="indent">
   2006-12-12
  </p>
  <h2>
   Cross References
  </h2>
  <p class="indent">
   <img src="ax_cflags_warn_all-xrefs.png" alt="ax_cflags_warn_all-xrefs.png"
   usemap="#ax_cflags_warn_all"><map id="ax_cflags_warn_all" name=
   "ax_cflags_warn_all">
    <area shape="poly" href="ac_cxx_rtti.html" title="ac_cxx_rtti" alt=""
    coords=
    "997,172 994,165 985,158 971,153 954,149 935,148 915,149 898,153 884,158 876,165 873,172 876,179 884,186 898,191 915,195 935,196 954,195 971,191 985,186 994,179">
    <area shape="poly" href="ax_cflags_aix_option.html" title=
    "ax_cflags_aix_option" alt="" coords=
    "215,275 210,267 195,261 172,255 143,252 111,251 78,252 49,255 26,261 11,267 6,275 11,282 26,289 49,294 78,297 111,299 143,297 172,294 195,289 210,282">
    <area shape="poly" href="ax_cflags_gcc_option.html" title=
    "ax_cflags_gcc_option" alt="" coords=
    "479,275 474,267 459,261 435,255 405,252 372,251 339,252 309,255 285,261 270,267 265,275 270,282 285,289 309,294 339,297 372,299 405,297 435,294 459,289 474,282">
    <area shape="poly" href="ax_cflags_warn_all.html" title=
    "ax_cflags_warn_all" alt="" coords=
    "1032,347 1027,339 1013,333 992,327 965,324 935,323 905,324 878,327 856,333 843,339 838,347 843,354 856,361 878,366 905,369 935,371 965,369 992,366 1013,361 1027,354">
    <area shape="poly" href="ax_cflags_hpux_option.html" title=
    "ax_cflags_hpux_option" alt="" coords=
    "772,203 766,195 750,189 725,183 694,180 659,179 624,180 592,183 567,189 551,195 546,203 551,210 567,217 592,222 624,225 659,227 694,225 725,222 750,217 766,210">
    <area shape="poly" href="ax_cflags_irix_option.html" title=
    "ax_cflags_irix_option" alt="" coords=
    "763,275 758,267 743,261 720,255 691,252 659,251 626,252 597,255 574,261 559,267 554,275 559,282 574,289 597,294 626,297 659,299 691,297 720,294 743,289 758,282">
    <area shape="poly" href="ax_cflags_sun_option.html" title=
    "ax_cflags_sun_option" alt="" coords=
    "766,347 761,339 746,333 722,327 692,324 659,323 625,324 595,327 571,333 556,339 551,347 556,354 571,361 595,366 625,369 659,371 692,369 722,366 746,361 761,354">
    <area shape="poly" href="ax_cflags_warn_all_ansi.html" title=
    "ax_cflags_warn_all_ansi" alt="" coords=
    "1319,347 1313,339 1296,333 1270,327 1237,324 1200,323 1163,324 1130,327 1104,333 1087,339 1081,347 1087,354 1104,361 1130,366 1163,369 1200,371 1237,369 1270,366 1296,361 1313,354">
    <area shape="poly" href="vl_prog_cc_warnings.html" title=
    "vl_prog_cc_warnings" alt="" coords=
    "1578,316 1573,309 1558,302 1535,297 1506,293 1473,292 1441,293 1412,297 1388,302 1373,309 1368,316 1373,323 1388,330 1412,335 1441,339 1473,340 1506,339 1535,335 1558,330 1573,323">
    <area shape="poly" href="ax_cxx_gcc_abi_demangle.html" title=
    "ax_cxx_gcc_abi_demangle" alt="" coords=
    "789,29 782,22 764,15 735,10 699,7 659,5 618,7 582,10 553,15 535,22 529,29 535,37 553,43 582,49 618,52 659,53 699,52 735,49 764,43 782,37">
   </map>
  </p>
  <h2>
   M4 Source Code
  </h2>
  <div class="indent">
   <pre class="m4source">
AC_DEFUN([AX_CFLAGS_WARN_ALL],[dnl
AS_VAR_PUSHDEF([FLAGS],[CFLAGS])dnl
AS_VAR_PUSHDEF([VAR],[ac_cv_cflags_warn_all])dnl
AC_CACHE_CHECK([m4_ifval($1,$1,FLAGS) for maximum warnings],
VAR,[VAR="no, unknown"
 AC_LANG_SAVE
 AC_LANG_C
 ac_save_[]FLAGS="$[]FLAGS"
for ac_arg dnl
in "-pedantic  % -Wall"       dnl   GCC
   "-xstrconst % -v"          dnl Solaris C
   "-std1      % -verbose -w0 -warnprotos" dnl Digital Unix
   "-qlanglvl=ansi % -qsrcmsg -qinfo=all:noppt:noppc:noobs:nocnd" dnl AIX
   "-ansi -ansiE % -fullwarn" dnl IRIX
   "+ESlit     % +w1"         dnl HP-UX C
   "-Xc        % -pvctl[,]fullmsg" dnl NEC SX-5 (Super-UX 10)
   "-h conform % -h msglevel 2" dnl Cray C (Unicos)
   #
do FLAGS="$ac_save_[]FLAGS "`echo $ac_arg | sed -e 's,%%.*,,' -e 's,%,,'`
   AC_TRY_COMPILE([],[return 0;],
   [VAR=`echo $ac_arg | sed -e 's,.*% *,,'` ; break])
done
 FLAGS="$ac_save_[]FLAGS"
 AC_LANG_RESTORE
])
case ".$VAR" in
     .ok|.ok,*) m4_ifvaln($3,$3) ;;
   .|.no|.no,*) m4_ifvaln($4,$4,[m4_ifval($2,[
        AC_RUN_LOG([: m4_ifval($1,$1,FLAGS)="$m4_ifval($1,$1,FLAGS) $2"])
                      m4_ifval($1,$1,FLAGS)="$m4_ifval($1,$1,FLAGS) $2"])]) ;;
   *) m4_ifvaln($3,$3,[
   if echo " $[]m4_ifval($1,$1,FLAGS) " | grep " $VAR " 2&gt;&amp;1 &gt;/dev/null
   then AC_RUN_LOG([: m4_ifval($1,$1,FLAGS) does contain $VAR])
   else AC_RUN_LOG([: m4_ifval($1,$1,FLAGS)="$m4_ifval($1,$1,FLAGS) $VAR"])
                      m4_ifval($1,$1,FLAGS)="$m4_ifval($1,$1,FLAGS) $VAR"
   fi ]) ;;
esac
AS_VAR_POPDEF([VAR])dnl
AS_VAR_POPDEF([FLAGS])dnl
])

dnl the only difference - the LANG selection... and the default FLAGS

AC_DEFUN([AX_CXXFLAGS_WARN_ALL],[dnl
AS_VAR_PUSHDEF([FLAGS],[CXXFLAGS])dnl
AS_VAR_PUSHDEF([VAR],[ac_cv_cxxflags_warn_all])dnl
AC_CACHE_CHECK([m4_ifval($1,$1,FLAGS) for maximum warnings],
VAR,[VAR="no, unknown"
 AC_LANG_SAVE
 AC_LANG_CPLUSPLUS
 ac_save_[]FLAGS="$[]FLAGS"
for ac_arg dnl
in "-pedantic  % -Wall"       dnl   GCC
   "-xstrconst % -v"          dnl Solaris C
   "-std1      % -verbose -w0 -warnprotos" dnl Digital Unix
   "-qlanglvl=ansi % -qsrcmsg -qinfo=all:noppt:noppc:noobs:nocnd" dnl AIX
   "-ansi -ansiE % -fullwarn" dnl IRIX
   "+ESlit     % +w1"         dnl HP-UX C
   "-Xc        % -pvctl[,]fullmsg" dnl NEC SX-5 (Super-UX 10)
   "-h conform % -h msglevel 2" dnl Cray C (Unicos)
   #
do FLAGS="$ac_save_[]FLAGS "`echo $ac_arg | sed -e 's,%%.*,,' -e 's,%,,'`
   AC_TRY_COMPILE([],[return 0;],
   [VAR=`echo $ac_arg | sed -e 's,.*% *,,'` ; break])
done
 FLAGS="$ac_save_[]FLAGS"
 AC_LANG_RESTORE
])
case ".$VAR" in
     .ok|.ok,*) m4_ifvaln($3,$3) ;;
   .|.no|.no,*) m4_ifvaln($4,$4,[m4_ifval($2,[
        AC_RUN_LOG([: m4_ifval($1,$1,FLAGS)="$m4_ifval($1,$1,FLAGS) $2"])
                      m4_ifval($1,$1,FLAGS)="$m4_ifval($1,$1,FLAGS) $2"])]) ;;
   *) m4_ifvaln($3,$3,[
   if echo " $[]m4_ifval($1,$1,FLAGS) " | grep " $VAR " 2&gt;&amp;1 &gt;/dev/null
   then AC_RUN_LOG([: m4_ifval($1,$1,FLAGS) does contain $VAR])
   else AC_RUN_LOG([: m4_ifval($1,$1,FLAGS)="$m4_ifval($1,$1,FLAGS) $VAR"])
                      m4_ifval($1,$1,FLAGS)="$m4_ifval($1,$1,FLAGS) $VAR"
   fi ]) ;;
esac
AS_VAR_POPDEF([VAR])dnl
AS_VAR_POPDEF([FLAGS])dnl
])

dnl  implementation tactics:
dnl   the for-argument contains a list of options. The first part of
dnl   these does only exist to detect the compiler - usually it is
dnl   a global option to enable -ansi or -extrawarnings. All other
dnl   compilers will fail about it. That was needed since a lot of
dnl   compilers will give false positives for some option-syntax
dnl   like -Woption or -Xoption as they think of it is a pass-through
dnl   to later compile stages or something. The "%" is used as a
dnl   delimimiter. A non-option comment can be given after "%%" marks
dnl   which will be shown but not added to the respective C/CXXFLAGS.
</pre>
  </div>
  <h2>
   License
  </h2>
  <div class="indent">
   <span style="white-space:nowrap;">Copyright &copy; 2006 Guido U. Draheim
   &lt;guidod@gmx.de&gt;</span>
   <p>
    This program is free software; you can redistribute it and/or modify it
    under the terms of the GNU General Public License as published by the Free
    Software Foundation; either version 2 of the License, or (at your option)
    any later version.
   </p>
   <p>
    This program is distributed in the hope that it will be useful, but WITHOUT
    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
    FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
    more details.
   </p>
   <p>
    You should have received a copy of the GNU General Public License along
    with this program; if not, write to the Free Software Foundation, Inc., 59
    Temple Place - Suite 330, Boston, MA 02111-1307, USA.
   </p>
   <p>
    As a special exception, the respective Autoconf Macro's copyright owner
    gives unlimited permission to copy, distribute and modify the configure
    scripts that are the output of Autoconf when processing the Macro. You need
    not follow the terms of the GNU General Public License when using or
    distributing such scripts, even though portions of the text of the Macro
    appear in them. The GNU General Public License (GPL) does govern all other
    use of the material that constitutes the Autoconf Macro.
   </p>
   <p>
    This special exception to the GPL applies to versions of the Autoconf Macro
    released by the Autoconf Macro Archive. When you make and distribute a
    modified version of the Autoconf Macro, you may extend this special
    exception to the GPL to apply to your modified version as well.
   </p>
  </div>
 </body>
</html>
